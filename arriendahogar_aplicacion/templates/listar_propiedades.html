{% extends 'base.html' %}

{% block title %}Listar Propiedades{% endblock %}

{% block content %}
<h2>Propiedades Disponibles</h2>
<form method="get" class="mb-3">
    <label for="comuna">Filtrar por comuna:</label>
    <select name="comuna" id="comuna" class="form-select" onchange="this.form.submit()">
        <option value="">Todas las comunas</option>
        {% for comuna in comunas %}
            <option value="{{ comuna.nombre }}">{{ comuna.nombre }}</option>
        {% endfor %}
    </select>
</form>
<ul class="list-group">
    {% for propiedad in propiedades %}
    <li class="list-group-item">
        <h5>{{ propiedad.nombre }}</h5>
        <p>{{ propiedad.descripcion }}</p>
        <p><strong>Precio mensual:</strong> {{ propiedad.precio_mensual }}</p>
        <a href="{% url 'generar_solicitud_arriendo' propiedad.id %}" class="btn btn-primary">Solicitar Arriendo</a>
    </li>
    {% endfor %}
</ul>
{% endblock %}
